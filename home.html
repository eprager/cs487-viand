<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>Viand</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="normalize.css">
    <link href="https://fonts.googleapis.com/css?family=Bad+Script" rel="stylesheet"> 
    <link href="https://fonts.googleapis.com/css?family=Poppins:300" rel="stylesheet"> 
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:700,600' rel='stylesheet' type='text/css'>
    <link href="https://fonts.googleapis.com/css?family=Maven+Pro|Merienda" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Merienda|Questrial" rel="stylesheet">


  </head>
  <body>
    <div class="wrapper">
      <div class="header">
          <h1>viand</h1>
        <div class="navigation">
          <ul>
            <li><strong><a href="index.html">LOG OUT</a></strong></li>
            <li><strong><a href="#">STORES</a></strong></li>
            <li><strong><a href="cart.html">CHECKOUT</a></strong></li>
          </ul>
        </div>
      </div>
      <div class="display">
          <div class="long">
            <label for="address">Locate Nearby Stores</label>
            <input id="address" type="address" name="address" placeholder="Your address..." class="address" /> 
            <a href="#"><div class="btn" id="searchbtn">Search</div></a> <!-- End Btn -->
          </div> <!-- End Box -->
          <div class="long stores">
            <!-- <a href="item.html?store=wholefoods" style="display: none"><div class="btnStore"  >Whole Foods Market</div></a> -->

          </div> <!-- End Box -->
      </div>
      <footer>
        <section class="footer">
          <h6>Anna Benson, Peter Menke, Emma Prager </h6>
        </section>
      </footer>
    </div>
  </body>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js" type="text/javascript"></script>
  <script> 
    $(function() {

      // Setup fake storage
      //window.localStorage.clear();

      var databse = {
        jewel: [
          {
            name: "Apple",
            price: 1,
            quantity: 30,
            icon: 'apple.jpg'
          },
          {
            name: "Banana",
            price: 1,
            quantity: 100,
            icon: 'banana.jpg'
          },
          {
            name: "Bread",
            price: 2,
            quantity: 50,
            icon: 'bread.jpg'
          },
          {
            name: "Butter",
            price: 2,
            quantity: 45,
            icon: 'butter.jpg'
          },
          {
            name: "Eggs",
            price: 3,
            quantity: 20,
            icon: 'eggs.jpg'
          },
          {
            name: "Milk",
            price: 4,
            quantity: 55,
            icon: 'milk.jpg'
          },
          {
            name: "Orange",
            price: 1,
            quantity: 20,
            icon: 'orange.jpg'
          }
        ],
        marianos: [          {
            name: "Apple",
            price: 1,
            quantity: 30,
            icon: 'apple.jpg'
          },
          {
            name: "Banana",
            price: 1,
            quantity: 100,
            icon: 'banana.jpg'
          },
          {
            name: "Bread",
            price: 2,
            quantity: 50,
            icon: 'bread.jpg'
          },
          {
            name: "Butter",
            price: 2,
            quantity: 45,
            icon: 'butter.jpg'
          },
          {
            name: "Eggs",
            price: 3,
            quantity: 20,
            icon: 'eggs.jpg'
          },
          {
            name: "Milk",
            price: 4,
            quantity: 55,
            icon: 'milk.jpg'
          },
          {
            name: "Orange",
            price: 1,
            quantity: 20,
            icon: 'orange.jpg'
          }],
        cvs: [          {
            name: "Apple",
            price: 1,
            quantity: 30,
            icon: 'apple.jpg'
          },
          {
            name: "Banana",
            price: 1,
            quantity: 100,
            icon: 'banana.jpg'
          },
          {
            name: "Bread",
            price: 2,
            quantity: 50,
            icon: 'bread.jpg'
          },
          {
            name: "Butter",
            price: 2,
            quantity: 45,
            icon: 'butter.jpg'
          },
          {
            name: "Eggs",
            price: 3,
            quantity: 20,
            icon: 'eggs.jpg'
          },
          {
            name: "Milk",
            price: 4,
            quantity: 55,
            icon: 'milk.jpg'
          },
          {
            name: "Orange",
            price: 1,
            quantity: 20,
            icon: 'orange.jpg'
          }],
        costco: [          {
            name: "Apple",
            price: 1,
            quantity: 30,
            icon: 'apple.jpg'
          },
          {
            name: "Banana",
            price: 1,
            quantity: 100,
            icon: 'banana.jpg'
          },
          {
            name: "Bread",
            price: 2,
            quantity: 50,
            icon: 'bread.jpg'
          },
          {
            name: "Butter",
            price: 2,
            quantity: 45,
            icon: 'butter.jpg'
          },
          {
            name: "Eggs",
            price: 3,
            quantity: 20,
            icon: 'eggs.jpg'
          },
          {
            name: "Milk",
            price: 4,
            quantity: 55,
            icon: 'milk.jpg'
          },
          {
            name: "Orange",
            price: 1,
            quantity: 20,
            icon: 'orange.jpg'
          }],
        aldi: [          {
            name: "Apple",
            price: 1,
            quantity: 30,
            icon: 'apple.jpg'
          },
          {
            name: "Banana",
            price: 1,
            quantity: 100,
            icon: 'banana.jpg'
          },
          {
            name: "Bread",
            price: 2,
            quantity: 50,
            icon: 'bread.jpg'
          },
          {
            name: "Butter",
            price: 2,
            quantity: 45,
            icon: 'butter.jpg'
          },
          {
            name: "Eggs",
            price: 3,
            quantity: 20,
            icon: 'eggs.jpg'
          },
          {
            name: "Milk",
            price: 4,
            quantity: 55,
            icon: 'milk.jpg'
          },
          {
            name: "Orange",
            price: 1,
            quantity: 20,
            icon: 'orange.jpg'
          }],
        petes: [          {
            name: "Apple",
            price: 1,
            quantity: 30,
            icon: 'apple.jpg'
          },
          {
            name: "Banana",
            price: 1,
            quantity: 100,
            icon: 'banana.jpg'
          },
          {
            name: "Bread",
            price: 2,
            quantity: 50,
            icon: 'bread.jpg'
          },
          {
            name: "Butter",
            price: 2,
            quantity: 45,
            icon: 'butter.jpg'
          },
          {
            name: "Eggs",
            price: 3,
            quantity: 20,
            icon: 'eggs.jpg'
          },
          {
            name: "Milk",
            price: 4,
            quantity: 55,
            icon: 'milk.jpg'
          },
          {
            name: "Orange",
            price: 1,
            quantity: 20,
            icon: 'orange.jpg'
          }],
        wholefoods: [          {
            name: "Apple",
            price: 1,
            quantity: 30,
            icon: 'apple.jpg'
          },
          {
            name: "Banana",
            price: 1,
            quantity: 100,
            icon: 'banana.jpg'
          },
          {
            name: "Bread",
            price: 2,
            quantity: 50,
            icon: 'bread.jpg'
          },
          {
            name: "Butter",
            price: 2,
            quantity: 45,
            icon: 'butter.jpg'
          },
          {
            name: "Eggs",
            price: 3,
            quantity: 20,
            icon: 'eggs.jpg'
          },
          {
            name: "Milk",
            price: 4,
            quantity: 55,
            icon: 'milk.jpg'
          },
          {
            name: "Orange",
            price: 1,
            quantity: 20,
            icon: 'orange.jpg'
          }]
      }

      var stores = [
            {id: 'jewel', display: 'Jewel Osco'},
            {id: 'marianos', display: "Mariano's"},
            {id: 'cvs', display: 'CVS'},
            {id: 'aldi', display: 'ALDI'},
            {id: 'petes', display: "Pete's Fresh Market"},
            {id: 'wholefoods', display: 'Whole Foods Market'},
          ]

      var dbstr = window.localStorage.getItem("database");
      if (!dbstr) {
        console.log('adding!')
        window.localStorage.setItem("database", JSON.stringify(databse));

      } else {
        console.log('already exists!')
      }

      // Handle fake search
      $('#searchbtn').click(function(e) {
        e.preventDefault();

        var addr = $('#address').val();
        if (addr == '') {
          alert("Address is not valid.")
          return;
        }

        $('.stores *').remove();
        
        $('.stores').append('<span id="loader" >Loading </span>');
        var load = $("#loader");

        console.log('here');

        setTimeout(function() {
          load.text(load.text() + '. ');
          setTimeout(function() {
            load.text(load.text() + '. ');
            setTimeout(function() {
              load.text(load.text() + '. ');
              setTimeout(function() {
                
                $('.stores *').remove();

                for (var i = 0; i < stores.length; i++) {
                  var s = stores[i];
                  if (Math.random() > 0.30) {
                    $('.stores').append('<a href="item.html?store=' + s.id + '"><div class="btnStore"  >'+ s.display +'</div></a>');
                  }
                }
              }, 500)
            }, 500)
          }, 500)
        }, 500)

      })
    })
  </script>
</html>